{% extends "base.html" %}

{% block content %}
<!-- Load ApexCharts -->
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<style>
    :root {
        --primary: #00b4d8;
        --secondary: #005f73;
        --accent: #94d2bd;
        --darker: #020617;
        --light: #f8fafc;
        --gray: #94a3b8;
        --gradient-1: linear-gradient(135deg, #00b4d8 0%, #005f73 50%, #94d2bd 100%);
        --gradient-2: linear-gradient(90deg, #00b4d8, #005f73);
        --font-heading: 'Space Grotesk', sans-serif;
    }

    body {
        background: var(--darker);
        color: var(--light);
        font-family: 'Inter', sans-serif;
    }

    /* Animated Background */
    .bg-animation {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        overflow: hidden;
    }

    .bg-animation::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background:
            radial-gradient(circle at 20% 80%, rgba(0, 180, 216, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 80% 20%, rgba(0, 95, 115, 0.1) 0%, transparent 50%);
        animation: bgFloat 20s ease-in-out infinite;
    }

    @keyframes bgFloat {

        0%,
        100% {
            transform: translate(0, 0) rotate(0deg);
        }

        50% {
            transform: translate(2%, 2%) rotate(1deg);
        }
    }

    .case-study-page {
        padding-top: 8rem;
        min-height: 100vh;
        position: relative;
    }

    .case-study-header {
        margin-bottom: 4rem;
        text-align: center;
    }

    .back-link {
        display: inline-block;
        margin-bottom: 1.5rem;
        color: var(--primary);
        font-weight: 600;
        text-decoration: none;
        transition: transform 0.3s ease;
    }

    .back-link:hover {
        transform: translateX(-5px);
    }

    .case-study-title {
        font-family: var(--font-heading);
        font-size: clamp(2.5rem, 5vw, 4rem);
        background: var(--gradient-1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1rem;
    }

    .case-study-content {
        background: rgba(15, 23, 42, 0.6);
        backdrop-filter: blur(20px);
        padding: 4rem;
        border-radius: 32px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        line-height: 1.8;
        font-size: 1.15rem;
        color: #e2e8f0;
        max-width: 900px;
        margin: 0 auto;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }

    .chart-container {
        margin: 4rem 0;
        padding: 2.5rem;
        background: rgba(2, 6, 23, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: 24px;
    }

    /* Markdown Styling */
    .markdown-body h2,
    .markdown-body h3 {
        font-family: var(--font-heading);
        color: white;
        margin-top: 3.5rem;
        margin-bottom: 1.5rem;
    }

    .markdown-body h2 {
        font-size: 2rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        padding-bottom: 0.5rem;
    }

    .markdown-body blockquote {
        border-left: 4px solid var(--primary);
        padding: 1.5rem 2rem;
        background: rgba(0, 180, 216, 0.05);
        border-radius: 0 16px 16px 0;
        font-style: italic;
        color: #94a3b8;
        margin: 3rem 0;
    }

    .markdown-body em {
        color: var(--primary);
        font-weight: 600;
        font-style: normal;
    }

    .markdown-body ul,
    .markdown-body ol {
        margin-bottom: 2rem;
        padding-left: 1.5rem;
    }

    .markdown-body li {
        margin-bottom: 0.75rem;
    }

    .case-study-footer {
        margin-top: 6rem;
        text-align: center;
        padding-bottom: 6rem;
    }

    .case-study-footer hr {
        border: none;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
        margin-bottom: 3rem;
    }

    @media (max-width: 768px) {
        .case-study-content {
            padding: 2rem;
            border-radius: 20px;
        }

        .case-study-title {
            font-size: 2.2rem;
        }
    }
</style>

<div class="bg-animation"></div>

<article class="case-study-page">
    <div class="container">
        <div class="case-study-header">
            <a href="index.html" class="back-link">&larr; Back to Portfolio</a>
            <h1 class="case-study-title">{{ title }}</h1>
        </div>

        <div class="case-study-content markdown-body">
            {{ content | safe }}
        </div>

        <div class="case-study-footer">
            <hr>
            <h3 style="font-family: 'Space Grotesk', sans-serif; margin-bottom: 1.5rem;">Interested in similar results?
            </h3>
            <p style="color: var(--gray); margin-bottom: 2.5rem;">Let's discuss how we can transform your data strategy.
            </p>
            <a href="index.html#contact" class="btn btn-primary">Schedule a Consultation</a>
        </div>
    </div>
</article>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // ApexCharts defaults for dark theme
        const chartDefaults = {
            chart: {
                foreColor: '#94a3b8',
                fontFamily: 'Inter, sans-serif',
                toolbar: { show: false }
            },
            grid: { borderColor: 'rgba(255,255,255,0.05)' }
        };

        // ROI Chart
        if (document.getElementById("roi-chart")) {
            const options = {
                ...chartDefaults,
                chart: { ...chartDefaults.chart, type: 'area', height: 350 },
                series: [{
                    name: 'Support Tickets',
                    data: [450, 420, 380, 290, 210, 180]
                }],
                xaxis: {
                    categories: ['Month 1', 'Month 2', 'Month 3', 'Month 4', 'Month 5', 'Month 6'],
                },
                colors: ['#00b4d8'],
                stroke: { curve: 'smooth', width: 3 },
                fill: {
                    type: 'gradient',
                    gradient: {
                        shadeIntensity: 1,
                        opacityFrom: 0.6,
                        opacityTo: 0.1,
                    }
                },
                title: {
                    text: 'Support Ticket Volume Reduction',
                    align: 'left',
                    style: { color: '#f8fafc', fontSize: '18px', fontWeight: '600' }
                }
            };
            new ApexCharts(document.getElementById("roi-chart"), options).render();
        }

        // Sentiment Chart
        if (document.getElementById("sentiment-chart")) {
            const options = {
                ...chartDefaults,
                chart: { ...chartDefaults.chart, type: 'donut', height: 350 },
                series: [65, 25, 10],
                labels: ['Positive', 'Neutral', 'Negative'],
                colors: ['#00b4d8', '#334155', '#e11d48'],
                legend: { position: 'bottom' },
                title: {
                    text: 'Customer Sentiment Analysis',
                    align: 'left',
                    style: { color: '#f8fafc', fontSize: '18px', fontWeight: '600' }
                },
                plotOptions: {
                    pie: {
                        donut: {
                            size: '75%',
                            labels: {
                                show: true,
                                total: {
                                    show: true,
                                    label: 'Sentiment',
                                    formatter: () => 'Analysis',
                                    color: '#f8fafc'
                                }
                            }
                        }
                    }
                }
            };
            new ApexCharts(document.getElementById("sentiment-chart"), options).render();
        }
    });
</script>
{% endblock %}